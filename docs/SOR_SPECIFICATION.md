# Техническая Спецификация: СОР (Система Обеспечения Разнообразия) v2.6

## 1. Концепция
СОР — это многоуровневая когнитивная надстройка над FractalMusicEngine, превращающая алгоритмическую генерацию в осмысленное музыкальное повествование. Система имитирует работу живого ансамбля, где каждый участник обладает памятью, слышит коллег и подчиняется драматическому сюжету.

---

## 2. Ключевые Технологии v2.6

### 2.1. Overlap Synthesis (Бесшовная Плотность)
*   **Механика**: Внедрение избыточных длительностей звука для устранения «шрамов» тишины.
*   **Параметры**:
    *   **Pads**: Длительность увеличена до 8.0 секунд (перекрытие в 2 такта).
    *   **Melody**: Коэффициент удлинения нот 1.6х.
*   **Результат**: Звуки не сменяют друг друга, а переплетаются, создавая эффект непрерывного «оркестрового тумана».

### 2.2. Global Sticky Orchestra Protocol (Наследование)
*   **Алгоритм**: "Inherit or Overwrite" (Наследование или Перезапись).
*   **Логика**: Инструмент сохраняет выбранный тембр и состояние активности до тех пор, пока в новой сцене или части блюпринта не встретит явную новую инструкцию (`instrumentation`).
*   **Результат**: Исключено «разбегание» состава. Оркестр сохраняет плотность и характер при любых переходах.

---

## 3. Ревизия Функций по Уровням

### Уровень 4: СОЧИНЕНИЕ (The Mind of SOR)
*   **Piano Stagnation Vaccine**: Автоматическое смещение фазы при обнаружении 3-х повторов цикла.
*   **Register Discipline**: 
    *   **Melody Ceiling**: MIDI 73 (C#5) — жесткое ограничение для соло-партий.
    *   **Bass Floor**: MIDI 24 (1-я октава) — защита фундамента.
    *   **Piano Ceiling**: MIDI 71 (B4).
*   **Dynasty Rotation**: Выбор авторской манеры (Eno, Oldfield, Mann и др.) на этапе DNA. Принудительная привязка тембров к выбранной Династии.
*   **BPM Hygiene**: Плотность событий снижается при темпах > 75 BPM.

### Уровень 5: ТРАНСЛЯЦИЯ (Transmission)
*   **AI Arbitrator**: Порог гармонического резонанса для авто-сохранения в глобальную память установлен в **0.90**.
*   **Actual BPM Sync**: Передача вычисленного темпа в UI.

### Уровень 7: ИСПОЛНЕНИЕ (Execution)
*   **AudioParam Safety**: Тотальная проверка значений на конечность.
*   **Volume Sovereignty**: Громкость — территория пользователя.

---
**Статус**: Документация синхронизирована с Планом №394. Система достигла промышленного стандарта плотности звука.
