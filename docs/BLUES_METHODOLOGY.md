# Методология: Имперский Блюз AuraGroove (v4.0)

Этот документ является «Золотым Стандартом» и «Священным Кодексом» генеративного блюза в системе AuraGroove. Он описывает общие правила, структуру и когнитивную логику, обязательную для всех блюзовых сюит.

---

## 1. Макро-структура: Сюжетное Повествование

Мы ушли от циклической генерации к форме «Рассказа». Каждая пьеса — это законченная драма.

### 1.1. Рождение (Lightning Intro)
*   **Длительность**: Ровно 6 тактов.
*   **Universal Birth Lottery**: Все 8 участников (Бас, Гитара, Пианино, Ударные, Rhodes, Скрипки, Спарклы, SFX) попадают в общий пул. Система перемешивает их и распределяет по 3-м сценам (по 2 такта каждая).
*   **Принцип Липкости (Sticky Ensemble)**: Вступивший инструмент не замолкает. Оркестр «нарастает» слой за слоем, достигая полного состава к 7-му такту.

### 1.2. Четыре Акта MAIN
Единый блок MAIN разбит на семантические главы:
1.  **MAIN_1 (Arrival)**: Знакомство. Гитарист и Басист задают тон.
2.  **MAIN_2 (Dialogue)**: Развитие. Активная перекличка Гитариста и Пианиста.
3.  **MAIN_3 (Introspection)**: Breakdown. Бит затихает, энергия падает, давая место рефлексии и тишине.
4.  **MAIN_4 (Final Climax)**: Гранд-финал. Максимальное напряжение и мощный стадионный звук.

### 1.3. Narrative Bridges (4 такта)
Между всеми частями и перед аутро стоят «Морфинг-Бриджи»:
*   **Первые 2 такта**: Доигрывают «хвост» прошлой темы (старые техники и пресеты).
*   **Последние 2 такта**: Плавно впускают характер следующей части.
*   **SFX Guard**: В меланхоличном блюзе SFX звучат **строго 1 раз за бридж**. Мэйны — территория чистой музыки.

---

## 2. Эмоциональная Физика (Tension Maps)

Напряжение (Tension) — это топливо для когнитивных решений ансамбля.

### 2.1. Механика 4-х Волн (Melancholy Logic)
*   **Диапазон**: Напряжение никогда не падает ниже **0.3** (чтобы не было пустоты) и не поднимается выше **0.8** (меланхолия — это не агрессия).
*   **Поведение**: Внутри каждой части `MAIN` напряжение плавно растет от 0.3 до 0.8 и так же плавно спадает к следующему бриджу. Это создает эффект «дыхания» сюжета.
*   **Фрактальный Тремор**: К значениям добавляется джиттер ±0.05, чтобы инструменты «дрожали» и чувствовались живыми.

---

## 3. Когнитивные Роли Ансамбля

### 3.1. Гитарист (The Narrator)
*   **Династии**: При старте выбирается одна из 6 Династий (*Soul, Texas, King, Detroit, Chromatic, Slow-Burn*).
*   **Масштаб 100+**: Система использует библиотеку из 100+ «Золотых Аксиом».
*   **Memory Guard**: Лик не повторится, пока не сыгран весь доступный пул Династии.
*   **Lick Mutator**: Перед игрой каждый лик проходит через мутацию (инверсия, ретроград, сдвиг, замена ритма). Это дает тысячи уникальных фраз.
*   **Закон ♭5**: Обязательное использование блюзовой ноты в вопросе и ее разрешение в ответе.

### 3.2. Пианист (The Mirror)
*   **Зеркало Tension**: Плотность игры — прямая функция от энергии.
    *   *T < 0.4*: Редкие «капли» одиночных нот.
    *   *T > 0.7*: Вязкие блюзовые заполнения и аккордовые акценты.

### 3.3. Барабанщик (The Heartbeat)
*   **Blues Beat**: Это не постукивания, а «качающий» ритм.
    *   *Low T*: Щетки и пульс бочки на «1».
    *   *Mid T*: Chicago Shuffle с бэкбитом на 2 и 4.
    *   *High T*: Stadium Drive с удвоенной бочкой.
*   **Tom Punctuation**: Короткий филл по томам Sonor Classix в конце каждой 4-тактной фразы гитариста.

### 3.4. Органист и Rhodes (The Pull)
*   **Rhodes Sovereignty**: В интро и при пиках напряжения (T > 0.75) аккомпанемент переключается на Rhodes для «очищения» звука.
*   **Organ Body**: В основное время работают Органы (`soft_jazz`, `prog`), создавая плотную блюзовую ткань.

---

## 4. Архитектура Кода: Разделение Власти

### 4.1. `music-theory.ts` (Глобальный DNA)
*   **Genesis**: Создание `SuiteDNA` (Темп, Ритмический пульс, Тональность).
*   **Energy**: Генерация глобальной карты `TensionMap`.
*   **Universal Constants**: Хранит универсальные ступени (`DEGREE_TO_SEMITONE`) и Атласы.

### 4.2. `blues-theory.ts` (Блюзовый Кодекс)
*   **Genre Laws**: Блюзовые шкалы (Пентатоника + $\flat 5$), 12-барные прогрессии.
*   **Logic**: Правила разрешения блюзовых нот и выбора Династий.
*   **Isolation**: Файл изолирован от общего движка, являясь единственным источником истины для жанра.

### 4.3. `blues-brain.ts` (Исполнительный Мозг)
*   **Composition**: Превращение «Теории» и «Ликов» в события `FractalEvent`.
*   **Real-time Logic**: Мгновенная реакция на Tension, управление мутациями и оркестровкой «на лету».

---

## 5. Запреты и Ограничения (Melancholy Purity)

1.  **Voice Embargo**: В меланхоличном блюзе полностью запрещены голоса (категория SFX `voice`).
2.  **No Hurdy-Gurdy**: Жесткий контроль повторов фраз на уровне сюиты и сессии.
3.  **The G1 Standard**: Бас никогда не опускается ниже MIDI 31, сохраняя чистоту и отсутствие «пердения».

**Статус**: Методология заморожена. Система достигла стандарта "The Imperial Bluest Blues".