
# Методология: Как мы играем Блюз (AuraGroove v2.5)

Этот документ описывает музыкальную философию, когнитивные правила и технические алгоритмы, которые превращают FractalMusicEngine (СОР) в живой блюзовый ансамбль.

---

## 1. Фундаментальная Философия: Язык Напряжений

Блюз в AuraGroove — это не набор клише, а динамическая система управления напряжением.

*   **Аксиома ♭5**: Блюзовая нота (тритон) является главным источником эмоционального напряжения. СОР сознательно «нагнетает» её использование в фазах CALL и CLIMAX.
*   **Закон Разрешения**: Любое напряжение (♭5, ♭3) обязано быть разрешено. СОР реализует это через переход в чистую квинту (5) или тонику (R).
*   **Вопрос и Ответ (Call and Response)**: Каждая 4-тактовая фраза — это диалог. 
    *   Такты 1-2: Вопрос (нисходящая мелодия, акцент на ♭5).
    *   Такт 3: Пауза («дыхание» солиста).
    *   Такт 4: Ответ (восходящее разрешение).

---

## 2. Генетическая Рекомбинация (The Seed)

Каждая пьеса рождается из «Генетического Семени» — классического лика, который проходит через детерминированную трансформацию.

*   **Выбор семени**: Система выбирает лик из библиотеки, исключая последние 10 использованных (Lick Rotation).
*   **Трансформация**: Лик-семя мутирует через один из методов:
    *   **Inversion**: Зеркальное отражение интервалов.
    *   **Retrograde**: Проигрывание задом наперед.
    *   **Transposition**: Сдвиг по ступеням пентатоники.
*   **Результат**: Лик становится «Уровнем 0» для фрактального роста всей последующей импровизации.

---

## 3. Самообучение и Генетический Отбор

AuraGroove — это самообучающаяся музыкальная экосистема. Она использует принципы генетических алгоритмов для повышения качества музыки. **Генофонд является глобальным и персистентным.**

*   **AI Arbitrator (Естественный отбор)**: В реальном времени система вычисляет `beautyScore` (Гармонический Резонанс). Если оценка превышает 0.88, сессия признается «Шедевром».
*   **Genetic Memory (The Library)**: Семена успешных сессий сохраняются в глобальную коллекцию Firestore (`masterpieces`). Это позволяет системе "помнить" лучшие решения сквозь сессии и разных пользователей.
*   **Breeding (Crossover)**: Новые пьесы наследуют черты «предков». Механизм `crossoverDNA` смешивает текущее семя со случайным "Шедевром" из глобальной библиотеки, передавая удачные гармонические и ритмические паттерны следующим поколениям.

---

## 4. Перкуссионный Диалог

Барабанщик — полноценный участник беседы, а не просто метроном.

*   **Ответ на паузу**: Если солист замолкает, барабанщик «отвечает» деликатным перестукиванием перкуссии (`perc-*`).
*   **Гравитация Поворота**: На 11-м и 12-м тактах цикла (Turnaround) выполняются обязательные «пробежки» по томам.
*   **Закон BPM**: Все перкуссионные украшения жестко ограничены четвертными нотами. Скорость перкуссии никогда не превышает темп пьесы, сохраняя величие и покой.

---

## 5. Тембральная Драматургия (Morphing)

Инструменты меняют свои «голоса» в зависимости от фрактального напряжения сюиты.

| Напряжение | Мелодия | Бас | Аккомпанемент |
|:---|:---|:---|:---|
| **Low (< 0.4)** | Black Acoustic | Jazz Warm | Rhodes Warm |
| **Mid (0.4 - 0.7)** | CS80 Synth | Reggae / Dub | Soft Jazz Organ |
| **High (> 0.7)** | Velvet Lead / Muff | 808 Sub | Jimmy Smith Organ |

---

## 6. Разбор по Настроениям

### Dark Blues (Ритуальный)
*   **Лад**: E Phrygian (акцент на ♭2 ступени).
*   **Сценарий**: Плавное накопление от пустоты органа до плотного «ритуального» ансамбля.
*   **Особенность**: Тяжелые, давящие басовые дроны и неземной сустейн CS80.

### Winter Blues (Меланхоличный)
*   **Лад**: D Dorian (мягкая, светлая грусть).
*   **Мелодия**: Максимальный контраст — от интимного «деревянного» щипка до экспрессивного Гилморовского соло.
*   **Бас**: Упругая связка Jazz -> Reggae -> 808.

### Anxious Blues (Тревожный)
*   **Лад**: Phrygian / Locrian.
*   **Механика**: Внедрен «Когнитивный джиттер» (микро-сдвиги тайминга ±10 тиков).
*   **Перкуссия**: Смещена на слабые доли (синкопирование), создавая эффект сбитого дыхания.
*   **Тембр**: Переход от холодного Rhodes к агрессивному Muff Lead.

---

## 7. Системные Гарантии (Guardrails)

*   **Novelty Guard**: СОР запрещает повторение одной и той же мелодической формы более 3-х раз подряд (анализ через Shape Hashing).
*   **Anti-Funeral March**: Принудительная вставка восходящего разрешения каждые 6-8 тактов.
*   **Muff Transparency**: Уровень дисторшна Muff Lead системно ограничен (0.25) для сохранения прозрачности микса.
*   **Persistent Ensemble**: Инструменты вступают кумулятивно — раз заиграв, они не исчезают до конца части.
