# Журнал Проекта "AuraGroove"

---

### ЗАПИСЬ: 2024-12-04 (План №89: "Фоновая Крепость")

**ПРОБЛЕМА:**
Крах аудио-движка через 30-40 секунд работы в фоновой вкладке. Хрипы и зависание звука.

**ПРИЧИНА:**
Браузерный троттлинг фоновых вкладок задерживал событие `onended`. Это приводило к накоплению "мертвых" нод, которые не удалялись, пока `globalActiveVoices` не достигал лимита, вызывая ресурсное голодание и перегрузку CPU.

**РЕШЕНИЕ:**
1.  **Voice Stealing**: Внедрена логика "кражи голосов". При достижении лимита в 120 голосов фабрика принудительно завершает самый старый активный голос, освобождая ресурсы для новых нот.
2.  **Background Janitor**: Добавлен независимый цикл очистки, который раз в 2 секунды проверяет время жизни каждой ноты и удаляет "просроченные" узлы, даже если `onended` не сработал.
3.  **Finite Guards**: Все вызовы `AudioParam` защищены проверкой `isFinite`, что предотвращает ошибки `NaN` при нестабильном тайминге в фоне.

**РЕЗУЛЬТАТ:**
Система сохраняет стабильность в фоне неограниченное время. Хрипы устранены за счет гарантированной ротации голосов.

---

### ЗАПИСЬ: 2024-12-04 (План №88.1: "Печать Стабильности")
... (предыдущие записи)
