# Журнал Проекта "AuraGroove"

---

### ЗАПИСЬ: 2024-12-04 (План №194: «CORE FREEZE & TRANSIENT STANDARD»)

**СТАТУС: ВВЕДЕН КАТЕГОРИЧЕСКИЙ ЗАПРЕТ НА МОДИФИКАЦИЮ ЯДРА (CORE FREEZE). ФАБРИКА ЗАКРЫТА НА ТРИ ЗАМКА.**

**ВЫВОДЫ ИССЛЕДОВАНИЯ:**
1. **Transient Standard**: Установлено, что оптимальная длительность транзиента для гибридного синтеза — первые **20 мс** волны. Это зона хаотической энергии, удара и резонанса, которая дает 90% эффекта "реальности" при наложении на синтетический тон.
2. **Architecture Lock**: Код `src/lib/instrument-factory.ts` зафиксирован как стабильный и производительный. Дальнейшее развитие системы переносится в область когнитивной композиции (Brain) и настройки пресетов.

---

### ЗАПИСЬ: 2024-12-04 (План №193: "Wavetable Efficiency & Master Protection")

**ПРОБЛЕМА:**
Хрипы и деградация звука через минуту игры, несмотря на отсутствие утечки памяти (GVR в норме).

**ПРИЧИНА:**
Вычислительная перегрузка аудио-потока. В гитарном движке функция `createPeriodicWave` вызывалась при каждой ноте. Эта операция (Inverse FFT) слишком тяжела для работы в реальном времени при высокой плотности соло.

**РЕШЕНИЕ:**
1. **Wavetable Caching**: В гитарный движок внедрено кэширование волновых таблиц. Волна рассчитывается один раз при смене пресета и переиспользуется всеми нотами.
2. **Master Limiter**: Добавлен финальный узел динамической защиты на выходе фабрики. Это предотвращает цифровой клиппинг при суммировании всех дорожек.
3. **GVR Log Lite**: Уменьшена нагрузка от логирования в консоль.

**ВЫВОД:**
Устранена главная причина вычислительного "удушья". Звук стабилизирован для длительных сессий.

---

### ЗАПИСЬ: 2024-12-04 (План №192: "Steel Guitar Seal")

**ПРОБЛЕМА:**
Накопительная утечка ресурсов в гитарном конвейере («минуту нормально, потом хрипит»).

**ПРИЧИНА:**
1. Неявная очистка транзиентов и осцилляторов в `buildGuitarEngine`.
2. Использование `setTimeout` в `noteOff`, который замораживается при выключении экрана.
3. Отсутствие принудительной остановки LFO эффектов при смене инструментов.

**РЕШЕНИЕ:**
1. **Passive Cleanup Implementation**: В гитарный движок внедрена очистка исключительно через событие `onended`.
2. **LFO Purge**: Фейзер и Хорус теперь останавливают свои осцилляторы при `disconnect()`.
3. **GVR Diagnostic Active**: Включены детальные логи глобального реестра голосов (GVR) для контроля освобождения памяти в реальном времени.

**ВЫВОД:**
Гитарный конвейер герметизирован. Система ресурсной безопасности "Steel Foundation" распространена на все инструменты.

---
