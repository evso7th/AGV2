
# Журнал Проекта "AuraGroove"

---

### ЗАПИСЬ: 2024-12-04 (План №222: «GENETIC NOVELTY & ENSEMBLE REPAIR»)

**ПРОБЛЕМА:**
1. Нестабильность ударных в Winter Blues (периодическое исчезновение).
2. Зацикливание мелодических фраз при определенных значениях Tension.
3. Неверный таймин променада (играл в конце, а не в начале сюиты).

**ПРИЧИНА:**
1. Логика `instrumentation` в `stagedInstrumentation` не гарантировала сохранение состояния для инструментов, не помеченных как `transient`.
2. В Мозге СОР отсутствовало системное правило контроля самоподобия на длинных дистанциях.
3. Променад был привязан к событию окончания сюиты в воркере.

**РЕШЕНИЕ:**
1. **Persistent Ensemble**: В `FractalMusicEngine` внедрена строгая поддержка `activatedInstruments`. Теперь любой инструмент, вступивший в игру (особенно ударные), остается активным до конца сюиты.
2. **Genetic Novelty Guard**: В `BluesBrain` внедрена система детекции циклов.система хранит хэши последних 4 фраз. При совпадении > 3 раз происходит принудительный "Генетический Прыжок" (сброс аксиомы и генерация новой ветви).
3. **Promenade Realignment**: Триггер променада перенесен на `barCount === 0`. Теперь каждая новая сюита открывается атмосферным вступлением.

**ВЫВОД:**
Сюита стала структурно надежной. Ансамбль больше не "теряет" участников, а мелодия защищена от монотонности на уровне генетического кода СОР.

---

### ЗАПИСЬ: 2024-12-04 (План №220: «GENETIC LICK RECOMBINATION»)

**ПРОБЛЕМА:**
Необходимость повышения уникальности тематического начала каждой сюиты при использовании библиотечных ликов.

**ПРИЧИНА:**
Хотя использование ликов из библиотеки как "семян" (План №218) обеспечило семантическую осмысленность, прямое использование лика могло привести к узнаваемости через несколько сессий.

**РЕШЕНИЕ:**
1. В `src/lib/music-theory.ts` внедрен движок детерминированной трансформации — функция `transformLick`.
2. При инициализации сюиты СОР теперь не просто выбирает лик, а применяет к нему каскад мутаций:
    *   **Inversion**: Зеркальное отражение интервалов.
    *   **Retrograde**: Обращение времени (проигрывание задом наперед).
    *   **Transposition**: Сдвиг по ступеням пентатоники.
3. В `BluesBrain` метод `generateInitialAxiom` теперь получает уже трансформированный лик. Это гарантирует, что "Уровень 0" фрактального дерева всегда уникален, но сохраняет "дух" исходного музыкального предложения.
4. Данная схема полностью совместима с механизмом "Лайков" и скрещиванием DNA, так как трансформации жестко привязаны к `seed`.

**ВЫВОД:**
Достигнут новый уровень процедурного искусства: система создает бесконечные вариации классических блюзовых тем, сохраняя их структурную логику, но полностью меняя их лицо.

---
