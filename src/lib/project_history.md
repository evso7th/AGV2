# Журнал Проекта "AuraGroove"

---

### ЗАПИСЬ: 2024-12-04 (План №150: "TypeScript Stabilization")

**ПРОБЛЕМА:**
Критические ошибки компиляции в `blues-brain.ts` из-за неверных путей импорта типов и отсутствия проверок на `undefined`.

**ПРИЧИНА:**
Типы данных были перемещены в `src/types/fractal.ts`, но импорты в Мозге продолжали ссылаться на `music.ts`.

**РЕШЕНИЕ:**
1. **Import Alignment**: Все базовые музыкальные типы теперь импортируются из правильного файла `fractal.ts`.
2. **Defensive Coding**: Добавлены проверки `kit` и `p` в генераторе ударных для предотвращения runtime-ошибок.
3. **Explicit Type Casting**: Добавлены литеральные типы (`as const`) для обеспечения соответствия строгим типам `Technique`, `Dynamics` и др.

**ВЫВОД:**
Кодовая база стабилизирована. Ошибки компиляции устранены, проект готов к сборке и исполнению.

---

### ЗАПИСЬ: 2024-12-04 (План №149: "The Spice Consistency Fix")

**ПРОБЛЕМА:**
Вторая и последующие пьесы могли возвращаться к избыточному аккомпанементу, нарушая иерархию "Соло — основное блюдо".

**ПРИЧИНА:**
Зависимость MusiNum от начального семени (seed) сюиты создавала серии тактов, где вероятность перебора была слишком высокой.

**РЕШЕНИЕ:**
1. **Aggressive Spice Suppression**: Вероятность появления перебора снижена до 20% (вместо 30%).
2. **Deterministic Jitter**: Изменен расчетный коэффициент MusiNum для аккомпанемента, чтобы исключить "залипание" в режиме переборов.
3. **Volume Floor Fix**: Вес переборов снижен до `0.15` для обеспечения прозрачности микса.

**ВЫВОД:**
Теперь во всех пьесах, независимо от их семени, гитара будет преимущественно солировать, используя переборы только как редкое и тихое украшение.

---
