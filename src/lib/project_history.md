
# Журнал Проекта "AuraGroove"

---

### ЗАПИСЬ: 2024-12-04 (План №35: "Операция: Чистый Кремний")

**ПРОБЛЕМА:**
Накопительная утечка памяти (Memory Leak) в аудио-движке. Приложение начинало тормозить и аварийно завершало работу через 30-40 секунд активного воспроизведения.

**ПРИЧИНА:**
Обнаружено нарушение правила "Note Lifecycle" в фабрике инструментов. В конвейере `buildBassEngine` (и частично в других) узлы `GainNode`, создаваемые для каждой отдельной ноты, никогда не отсоединялись от общего аудио-графа. Это приводило к лавинообразному накоплению невидимых, но активных нод, которые потребляли ресурсы CPU и RAM.

**РЕШЕНИЕ:**
1. **Строгий Cleanup**: Во все конвейеры синтеза (`synth`, `organ`, `bass`, `guitar`) внедрен механизм гарантированного отсоединения. Теперь по завершении стадии `release` каждой ноты вызывается `voiceGain.disconnect()`.
2. **Note Lifecycle Protocol**: Каждая нота теперь имеет три четкие стадии в графе: Рождение (noteOn), Жизнь (sustain) и Смерть (disconnect). 
3. **Стабилизация Баса**: Особое внимание уделено басовому движку, где утечка была наиболее агрессивной.

**РЕЗУЛЬТАТ:**
Потребление ресурсов стабилизировалось. Накопительный эффект устранен. Движок может работать неограниченное время без деградации звука и крахов.

---

### ЗАПИСЬ: 2024-12-04 (План №34: "Глобализация Leslie и Suitcase Rhodes")

**АРХИТЕКТУРНЫЙ АПГРЕЙД: МОДУЛЬНЫЙ ЛЕСЛИ**
Мы вышли на новый уровень гибкости эффектов модуляции.
1. **Глобальный Leslie**: Модуль `createPureLeslie` (амплитудная модель без задержек) успешно вынесен из органного движка и теперь доступен как универсальный блок в фабрике. Это позволило внедрить "вращающийся воздух" в любые синтезаторы.
2. **Suitcase Tremolo (Auto-Pan)**: Внедрен новый FX-модуль `makeTremolo`, реализующий классическое стерео-качание. 
3. **Обновление Rhodes**: Пресет `ep_rhodes_warm` теперь использует гибридную цепь: фортепианный синтез -> мягкий Leslie -> Suitcase Tremolo. Это обеспечило "запредельную" аутентичность электропиано 70-х при сохранении фортепианного затухания.
4. **Синт-Конвейер V2**: `buildSynthEngine` теперь официально поддерживает опциональные блоки Leslie и Tremolo, что открывает путь к созданию сверх-живых пэдов.

---

### ЗАПИСЬ: 2024-12-04 (План №33: "Живой Орган и Прорыв Pure Amplitude")

**ТЕХНОЛОГИЧЕСКИЙ ПРОРЫВ: ЧИСТЫЙ ОРГАН**
Мы окончательно решили проблему "космического" звука и металлических вибраций в органе.
1. **Pure Amplitude Leslie**: Полностью отказались от использования `DelayNode` для имитации вращения. Теперь эффект Leslie реализуется исключительно через амплитудную модуляцию (AM) громкости и тембра отдельно для ВЧ и НЧ составляющих. Это исключило возможность возникновения фазовых искажений и паразитных фидбэков.
2. **Serial Path (Блокировка Байпаса)**: Удален параллельный "сухой" путь сигнала. Теперь 100% звука проходит через виртуальные роторы, что предотвращает расслоение тембра на "неподвижный пэд" и "эффект поверх него".
3. **Укрощение Doppler**: Частотная модуляция (FM) сведена к суб-сенсорному уровню (0.00002), что убрало неприятные "подвывания".

**НОВЫЕ УЛУЧШЕНИЯ (План 33):**
- **Инерция роторов**: Внедрена раздельная механика разгона для Horn (быстрый) и Drum (медленный).
- **Tonewheel Leakage**: Добавлен аналоговый "пол шума" (-60dB) для устранения цифровой стерильности.
- **Phase Randomization**:drawbars теперь стартуют с разной фазой, создавая естественный объем.
- **Диагностика**: Восстановлены логи строительства пайплайнов во всех конвейерах фабрики.
