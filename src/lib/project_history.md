
# Журнал Проекта "AuraGroove"

---

### ЗАПИСЬ: 2024-12-04 (План №39: "Гармонический Фолдбэк и Семантика Соло")

**ПРОБЛЕМА:**
1. Органы на высоких нотах звучали слишком резко и "цифрово".
2. Гитарные соло были недостаточно выразительными и не имели семантической связи с этапами композиции.
3. Гитаристам не хватало технического разнообразия (только соло или только одна нота).

**ПРИЧИНА:**
1. Отсутствие физического ограничения ВЧ-регистров (foldback), характерного для Hammond.
2. Лики выбирались из плоского списка без учета их настроения и сложности.
3. В движке не была реализована поддержка паттернов фингерстайла для мелодической линии.

**РЕШЕНИЕ:**
1. **Harmonic Foldback**: В `buildOrganEngine` внедрено ограничение в 6000 Гц. Все гармоники выше этого порога теперь автоматически переносятся на октаву ниже. Звук стал плотным и винтажным.
2. **Семантические Теги**: Библиотека ликов дополнена системой тегов (`cry`, `pickup`, `major` и др.), что подготовило почву для контекстного выбора фраз.
3. **Hybrid Guitar Tech**: В движок добавлена логика "30% фингерстайла". Теперь гитарист периодически переключается с соло на сложные переборы (Travis Picking).
4. **Staged Variety**: В Winter Blues внедрена 50/50 вероятность выбора между Rhodes и Органом в начале интро.

**РЕЗУЛЬТАТ:**
Инструменты обрели акустическую глубину и исполнительский характер. Орган звучит благородно, а гитара демонстрирует живую, человеческую вариативность техник.

---

### ЗАПИСЬ: 2024-12-04 (План №38: "Зимний Оркестр и Родос-Трансформация")

**ПРОБЛЕМА:**
1. Органы звучали слишком громко, подавляя гитару.
2. Вступление Winter Blues было однообразным.
3. Мелодическая линия гитары была недостаточно динамичной для блюза.
4. После интро часть ансамбля исчезала.

**ПРИЧИНА:**
1. Базовая громкость в пресетах V2 была завышена.
2. В начальных стадиях интро использовался только один тип сопровождения (джаз-орган).
3. Плотность нот и выбор планов соло в блюпринте были настроены слишком консервативно.
4. Слои `sfx` и `sparkles` не были прописаны в основных частях блюпринта.

**РЕШЕНИЕ:**
1. **Балансировка Микса**: Громкость `organ` и `organ_soft_jazz` снижена на 50%.
2. **Rhodes Prologue**: В начальных сценах Winter Blues орган заменен на `ep_rhodes_warm` для придания мягкости и "электрического" шарма.
3. **Bold Solo Protocol**: Плотность мелодии увеличена до максимума, выбраны более энергичные планы соло (S01, S03).
4. **Full Cast Persistence**: Все слои и инструменты из финальной стадии интро теперь гарантированно звучат во всех последующих частях сюиты.

**РЕЗУЛЬТАТ:**
Звучание стало сбалансированным и глубоким. Вступление теперь плавно переходит от теплого Родоса к полному оркестру, а гитара ведет уверенную и бодрую мелодическую линию.

---

### ЗАПИСЬ: 2024-12-04 (План №37: "Оптимизация и Тотальный Контроль")

**ПРОБЛЕМА:**
1. Легкие потрескивания (CPU spikes) при игре аккордами.
2. Слышимые частотные биения («подвывания») в органе.
3. Отсутствие визуального контроля за количеством активных аудио-нод в консоли.

**ПРИЧИНА:**
1. Тяжелая операция `createPeriodicWave` вызывалась внутри `noteOn` для каждого регистра (36 раз на аккорд), перегружая CPU.
2. Остаточная связь Vibrato LFO с `detune` осцилляторов вызывала плавание строя.
3. Логи очистки были, но не было суммарного счетчика «живых» голосов.

**РЕШЕНИЕ:**
1. **Static Waveform Optimization**: Создание `tonewheelWave` вынесено за пределы `noteOn`. Теперь все ноты используют одну пре-генерированную волну.
2. **Чистый Строй**: Удалена любая модуляция высоты тона в органе. Leslie теперь работает исключительно через амплитуду и фильтрацию.
3. **Audio Monitor**: Внедрен глобальный счетчик `globalActiveVoices` с выводом в консоль каждые 2 секунды.
4. **CPU Relief**: Oversampling дисторшна снижен до `2x`, что критично для мобильной производительности.

**РЕЗУЛЬТАТ:**
Треск устранен. Строй органа идеально стабилен. Мы получили инструмент для визуального контроля утечек памяти в реальном времени.

---
