
# Журнал Проекта "AuraGroove"

---

### ЗАПИСЬ: 2024-12-04 (План №220: «GENETIC LICK RECOMBINATION»)

**ПРОБЛЕМА:**
Необходимость повышения уникальности тематического начала каждой сюиты при использовании библиотечных ликов.

**ПРИЧИНА:**
Хотя использование ликов из библиотеки как "семян" (План №218) обеспечило семантическую осмысленность, прямое использование лика могло привести к узнаваемости через несколько сессий.

**РЕШЕНИЕ:**
1. В `src/lib/music-theory.ts` внедрен движок детерминированной трансформации — функция `transformLick`.
2. При инициализации сюиты СОР теперь не просто выбирает лик, а применяет к нему каскад мутаций:
    *   **Inversion**: Зеркальное отражение интервалов.
    *   **Retrograde**: Обращение времени (проигрывание задом наперед).
    *   **Transposition**: Сдвиг по ступеням пентатоники.
3. В `BluesBrain` метод `generateInitialAxiom` теперь получает уже трансформированный лик. Это гарантирует, что "Уровень 0" фрактального дерева всегда уникален, но сохраняет "дух" исходного музыкального предложения.
4. Данная схема полностью совместима с механизмом "Лайков" и скрещиванием DNA, так как трансформации жестко привязаны к `seed`.

**ВЫВОД:**
Достигнут новый уровень процедурного искусства: система создает бесконечные вариации классических блюзовых тем, сохраняя их структурную логику, но полностью меняя их лицо.

---

### ЗАПИСЬ: 2024-12-04 (План №219: «NON-FINITE AUDIOPARAM CRITICAL FIX»)

**ПРОБЛЕМА:**
Критический сбой `Uncaught (in promise) TypeError: Failed to execute 'linearRampToValueAtTime' on 'AudioParam': The provided double value is non-finite`.

**ПРИЧИНА:**
В файле `instrument-factory.ts` отсутствовали проверки на конечность чисел (`isFinite`) для параметров ADSR. При использовании пресетов с неполными объектами `adsr` переменные атаки, спада или релиза принимали значение `NaN`, что недопустимо для Web Audio API.

**РЕШЕНИЕ:**
1. В `src/lib/instrument-factory.ts` проведена ревизия функций `triggerAttack` и `triggerRelease`.
2. Внедрены тотальные проверки `isFinite` для всех временных меток и уровней громкости.
3. Добавлены безопасные значения по умолчанию (fallback) для каждого этапа огибающей.
4. Процедура "Core Freeze" была временно снята пользователем для этой операции.

**ВЫВОД:**
Стабильность аудио-движка восстановлена. Система теперь устойчива к любым неполным или некорректным данным в пресетах инструментов.

---
