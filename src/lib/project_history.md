# Журнал Проекта "AuraGroove"

---

### ЗАПИСЬ: 2024-12-04 (План №154: "Dramatic Expansion & First Resonance")

**ПРОБЛЕМА:**
Сюжетная линия сюиты была слишком плоской (малый диапазон напряжения), а музыканты играли изолированно, создавая риск хаотичного наслоения звуков ("каши").

**ПРИЧИНА:**
1. Математика MusiNum в `generateTensionMap` давала средние значения около 0.5 без резких перепадов.
2. Отсутствие механизма обратной связи между тактами (Resonance Buffer).
3. Отсутствие лимитов на одновременную активность инструментов.

**РЕШЕНИЕ:**
1. **Dramatic Contrast**: Внедрена S-образная функция контраста для карты напряжения. Теперь сюжет имеет четкие зоны "шепота" (tension < 0.2) и "крика" (tension > 0.8).
2. **Resonance Buffer**: В `FractalMusicEngine` добавлен буфер `lastEvents`. Теперь Мозг "слышит", что играли коллеги в прошлом такте.
3. **Neighbor Listening**: 
    - Гитарист акцентирует атаку, если барабанщик только что сделал филл.
    - Басист переходит на волкинг, если гитарист взял "кричащую" высокую ноту.
4. **Energy Budget**: Реализована система баллов. Каждый инструмент "стоит" определенную энергию. Если бюджет такта (зависящий от напряжения) превышен, второстепенные партии упрощаются или отключаются.

**ВЫВОД:**
Сюита обрела драматургическую глубину и ансамблевую реактивность. Риск "каши" устранен на уровне оркестровки.

---

### ЗАПИСЬ: 2024-12-04 (План №153: "Dramaturgy Stabilization")

**ПРОБЛЕМА:**
Критические ошибки Runtime `TypeError: Cannot read properties of undefined` в `blues-brain.ts`.

**ПРИЧИНА:**
1. Несоответствие длины массивов в планах соло.
2. Устаревшие пути импорта типов.

**РЕШЕНИЕ:**
1. **Dynamic Chorus Selection**: Внедрен расчет `chorusIdx % plan.choruses.length`.
2. **Type Import Alignment**: Импорты исправлены на `fractal.ts`.

**ВЫВОД:**
Стабильность музыкального воркера восстановлена.

---
