
# Журнал Проекта "AuraGroove"

---

### ЗАПИСЬ: 2024-12-04 (ПЛАН №368: RADIO STABILIZATION V2)

**ПРОБЛЕМА:**
Эффект "заезженной пластинки" в режиме Radio. Циклический треск из-за голодания буфера при больших интервалах чанков (1000мс).

**РЕШЕНИЕ:**
1.  **High-Density Chunks**: Интервал нарезки MediaRecorder уменьшен до 500мс. Это обеспечивает более равномерное пополнение буфера MediaSource.
2.  **Extended Pre-roll**: Плеер теперь ждет накопления 4-х чанков перед стартом. Это сохраняет тот же 2-секундный запас, но делает его более устойчивым к задержкам отдельных пакетов.
3.  **Error Resilience**: Улучшена обработка исключений при записи и аппенде буфера.

**РЕЗУЛЬТАТ:**
Стабильное, непрерывное звучание в режиме Radio. Устранено "заикание" при работе в фоне и через Bluetooth.

---

### ЗАПИСЬ: 2024-12-04 (ПЛАН №367: TRUE POLYPHONY)

**ПРОБЛЕМА:**
Ритмический треск в гитаре и органе при наложении нот. Причина — использование общих осцилляторов для всех нот в инструменте (ложная полифония).

**РЕШЕНИЕ:**
1.  **Polyphonic Instantiation**: Перенос создания узлов Oscillator и Gain внутрь метода noteOn.
2.  **Isolated Envelopes**: Каждая нота теперь имеет свою независимую ADSR-огибающую.
3.  **Global Voice Registry**: Все голоса регистрируются в GVR для корректной очистки.

**РЕЗУЛЬТАТ:**
Исчез "электрический" треск при быстрой игре. Плотное, чистое звучание аккордов и пассажей.

---

### ЗАПИСЬ: 2024-12-04 (ПЛАН №365: RADIO STABILIZATION)

**ПРОБЛЕМА:**
Ритмический треск (50 Гц) в режиме Radio. Starvation-эффект из-за мгновенного старта плеера без накопленного буфера.

**РЕШЕНИЕ:**
1.  **AudioContext 48kHz**: Перевод всей системы на 48000 Гц. Это исключает ресемплирование при упаковке в Opus, снижая нагрузку на CPU и вероятность щелчков.
2.  **Buffering Pre-roll**: Внедрен механизм ожидания накопления первых двух чанков данных (2 секунды) перед запуском воспроизведения. Это создает "подушку безопасности" против джиттера.
3.  **High-Fidelity Encoding**: Повышен битрейт вещания до 192kbps.

**РЕЗУЛЬТАТ:**
Чистый, непрерывный поток в режиме Radio без фонового треска. Стабильная работа на мобильных устройствах и Bluetooth-акустике.

---

### ЗАПИСЬ: 2024-12-04 (ПЛАН №364: BROADCAST BUNKER)

**ПРОБЛЕМА:**
Хрипы и артефакты при прослушивании через Bluetooth-акустику. Капризное поведение AudioContext в фоновом режиме на мобильных ОС.

**РЕШЕНИЕ:**
1.  **Broadcast Mode**: Реализована технология "Трансляции шедевра". Звук из AudioContext захватывается, кодируется в WebM/Opus и подается в системный `<audio>` плеер через MediaSource API.
2.  **Jitter Shield**: Системный плеер обладает огромным буфером, который полностью поглощает джиттер Bluetooth-канала и задержки JS-потока.
3.  **Background Sovereignty**: Использование тега `<audio>` дает приложению высший приоритет в ОС, предотвращая "засыпание" музыки при выключении экрана.

**РЕЗУЛЬТАТ:**
Кристально чистый звук на внешней акустике. Возможность слушать AuraGroove как радиостанцию с заблокированным экраном.

---

### ЗАПИСЬ: 2024-12-04 (ROLLBACK: PRE-AMBIENT STABLE)

**ПРОБЛЕМА:**
Нестабильность системы после попыток глубокой интеграции амбиент-надстроек. Необходимость возврата к чистому блюзовому "Золотому стандарту".

**РЕШЕНИЕ:**
1.  **System Rollback**: Откат кодовой базы к состоянию «До внедрения амбиента».
2.  **Foundation Preservation**: Подтверждение использования «Золотой Фабрики» (v3.4) как технического стандарта "Steel Foundation", обеспечивающего работу в фоновом режиме через пассивную очистку `onended`.
3.  **Focus**: Возврат к отточенной блюзовой логике и надежному синтезу.

**РЕЗУЛЬТАТ:**
Стабильность восстановлена. Система работает на базе "Имперского" звукового движка.
