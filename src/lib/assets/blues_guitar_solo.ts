/**
 * #ЗАЧЕМ: Этот файл содержит оцифрованную библиотеку блюзовых гитарных соло,
 *          состоящую из "ликов" (коротких фраз) и "планов" (последовательностей ликов).
 *          Он служит "партитурой" для FractalMusicEngine при генерации сложных соло.
 * #ЧТО: Экспортирует BLUES_SOLO_LICKS (12 базовых фраз) и BLUES_SOLO_PLANS (10 планов по 36 тактов).
 * #СВЯЗИ: Используется в `fractal-music-engine.ts` для генерации соло.
 */

import type { BluesSoloPhrase } from '@/types/fractal';

// #ИСПРАВЛЕНО (ПЛАН 905): Добавлены недостающие поля 'd' (длительность)
//                        для обеспечения целостности данных и предотвращения ошибок.
// Структура события: { t: tick, d: duration_in_ticks, deg: degree, tech?: technique }
export const BLUES_SOLO_LICKS: Record<string, BluesSoloPhrase> = {
  L01: [{t:0,d:3,deg:'b3',tech:'bn'}, {t:3,d:3,deg:'R'}, {t:6,d:6,deg:'5',tech:'vb'}],
  L02: [{t:0,d:3,deg:'b3',tech:'gr'}, {t:3,d:3,deg:'3'}, {t:6,d:6,deg:'5',tech:'vb'}],
  L03: [{t:0,d:2,deg:'R'}, {t:2,d:2,deg:'4'}, {t:4,d:2,deg:'#4'}, {t:6,d:2,deg:'5'}, {t:8,d:2,deg:'6'}, {t:10,d:2,deg:'5'}],
  L04: [{t:0,d:6,deg:'b3',tech:'vb'}, {t:6,d:6,deg:'11'}],
  L05: [{t:0,d:3,deg:'b2',tech:'gr'}, {t:3,d:3,deg:'R'}, {t:6,d:6,deg:'b7'}],
  L06: [{t:0,d:4,deg:'9'}, {t:4,d:8,deg:'R',tech:'vb'}],
  L07: [{t:0,d:6,deg:'5',tech:'ds'}, {t:6,d:6,deg:'R'}], // ds(3-b7) would need more complex logic, simplified for now
  L08: [{t:8,d:2,deg:'2'}, {t:10,d:2,deg:'b3'}, {t:0,d:3,deg:'3',tech:'h'}], // Note: this lick starts on tick 8
  L09: [{t:0,d:2,deg:'2'},{t:2,d:2,deg:'b3'},{t:4,d:2,deg:'3'},{t:6,d:2,deg:'4'},{t:8,d:2,deg:'#4'},{t:10,d:2,deg:'5'}],
  L10: [{t:0,d:6,deg:'R'},{t:6,d:6,deg:'R+8',tech:'vb'}],
  L11: [{t:0,d:3,deg:'R'},{t:3,d:3,deg:'3'},{t:6,d:6,deg:'6',tech:'vb'}],
  L12: [{t:0,d:12,deg:'5',tech:'bn'}] // Stop-time scream
};

// 10 планов соло, каждый на 36 тактов (3 хора по 12 тактов)
export const BLUES_SOLO_PLANS: Record<string, { choruses: string[][] }> = {
  "E_minor_slow_cry": {
    choruses: [
      ['L01', 'L11', 'L03', 'L04', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09'],
      ['L08', 'L11', 'L03', 'L04', 'L11', 'L04', 'L03', 'L10', 'L12', 'L12', 'L01', 'L09'], // Stop-time on bars 9-10
      ['L10', 'L11', 'L03', 'L01', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09']
    ]
  },
  "E_major_sweet_burn": {
    choruses: [
      ['L02', 'L11', 'L03', 'L06', 'L11', 'L06', 'L03', 'L10', 'L03', 'L11', 'L02', 'L09'],
      ['L08', 'L11', 'L03', 'L06', 'L11', 'L06', 'L03', 'L10', 'L12', 'L12', 'L02', 'L09'],
      ['L10', 'L11', 'L03', 'L02', 'L11', 'L06', 'L03', 'L10', 'L03', 'L11', 'L02', 'L09']
    ]
  },
  "A_minor_velvet": {
    choruses: [
      ['L01', 'L11', 'L03', 'L04', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09'],
      ['L08', 'L11', 'L03', 'L04', 'L11', 'L04', 'L03', 'L10', 'L12', 'L12', 'L01', 'L09'],
      ['L10', 'L11', 'L03', 'L01', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09']
    ]
  },
  "D_major_late_night": {
    choruses: [
      ['L02', 'L11', 'L03', 'L06', 'L11', 'L06', 'L03', 'L10', 'L03', 'L11', 'L02', 'L09'],
      ['L08', 'L11', 'L03', 'L06', 'L11', 'L06', 'L03', 'L10', 'L12', 'L12', 'L02', 'L09'],
      ['L10', 'L11', 'L03', 'L02', 'L11', 'L06', 'L03', 'L10', 'L03', 'L11', 'L02', 'L09']
    ]
  },
  "G_minor_smoky": {
    choruses: [
      ['L01', 'L11', 'L03', 'L04', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09'],
      ['L08', 'L11', 'L03', 'L04', 'L11', 'L04', 'L03', 'L10', 'L12', 'L12', 'L01', 'L09'],
      ['L10', 'L11', 'L03', 'L01', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09']
    ]
  },
  "B_minor_knife_edge": {
    choruses: [
      ['L01', 'L11', 'L03', 'L04', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09'],
      ['L08', 'L11', 'L03', 'L04', 'L11', 'L04', 'L03', 'L10', 'L12', 'L12', 'L01', 'L09'],
      ['L10', 'L11', 'L03', 'L01', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09']
    ]
  },
  "A_major_sunshine": {
    choruses: [
      ['L02', 'L11', 'L03', 'L06', 'L11', 'L06', 'L03', 'L10', 'L03', 'L11', 'L02', 'L09'],
      ['L08', 'L11', 'L03', 'L06', 'L11', 'L06', 'L03', 'L10', 'L12', 'L12', 'L02', 'L09'],
      ['L10', 'L11', 'L03', 'L02', 'L11', 'L06', 'L03', 'L10', 'L03', 'L11', 'L02', 'L09']
    ]
  },
  "C_minor_soul": {
    choruses: [
      ['L04', 'L11', 'L03', 'L01', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09'],
      ['L08', 'L11', 'L03', 'L04', 'L11', 'L04', 'L03', 'L10', 'L12', 'L12', 'L01', 'L09'],
      ['L10', 'L11', 'L03', 'L01', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09']
    ]
  },
  "F_sharp_minor_deep_blue": {
    choruses: [
      ['L01', 'L11', 'L03', 'L04', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09'],
      ['L08', 'L11', 'L03', 'L04', 'L11', 'L04', 'L03', 'L10', 'L12', 'L12', 'L01', 'L09'],
      ['L10', 'L11', 'L03', 'L01', 'L11', 'L04', 'L03', 'L10', 'L04', 'L05', 'L01', 'L09']
    ]
  },
  "G_major_tears_and_light": {
    choruses: [
      ['L02', 'L11', 'L03', 'L06', 'L11', 'L06', 'L03', 'L10', 'L03', 'L11', 'L02', 'L09'],
      ['L08', 'L11', 'L03', 'L06', 'L11', 'L06', 'L03', 'L10', 'L12', 'L12', 'L02', 'L09'],
      ['L10', 'L11', 'L03', 'L02', 'L11', 'L06', 'L03', 'L10', 'L03', 'L11', 'L02', 'L09']
    ]
  }
};

    