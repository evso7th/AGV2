# Проектный Бэклог "AuraGroove"

Этот документ содержит принятые, но отложенные на будущее идеи и архитектурные решения. Мы возвращаемся к этому списку, когда основная функциональность стабильна и мы готовы к "тонкой настройке".

---

### ЗАПИСЬ: 2024-11-01 (План 887: "Живые Ударные")

**ID:** `FEAT-DRUMS-001`
**Статус:** Принято, отложено (в бэклоге).

**ЗАДАЧА:**
Кардинально повысить реализм и динамику ударных партий, перейдя от использования одного сэмпла на инструмент к многослойной системе.

**ПРИЧИНА:**
Текущая реализация ударных использует только один звуковой файл для каждого элемента (бочка, малый и т.д.), что приводит к "плоскому", роботизированному звучанию. `FractalMusicEngine` генерирует события с разной `velocity` (громкостью), но это влияет только на громкость сэмпла, а не на его тембр, что неестественно.

**СТРАТЕГИЯ "УМНОГО ОТБОРА" (3+1):**
Чтобы избежать раздувания проекта десятками сэмплов на каждый инструмент, решено использовать компромиссный, но эффективный подход:

1.  **Три Слоя Громкости:** Для каждого ключевого инструмента (`kick`, `snare`, `hat`, `ride`, `tom`) выбрать по три сэмпла, представляющих разную силу удара:
    *   **`soft`**: Тихий удар (из диапазона `vl1` - `vl3`).
    *   **`medium`**: Удар средней силы (из диапазона `vl6` - `vl8`).
    *   **`hard`**: Сильный, акцентированный удар (из диапазона `vl10` - `vl12`).

2.  **Один Вариант "Round Robin":** Для каждого из этих трех слоев громкости использовать только один вариант записи (например, `_rr1.wav`), чтобы избежать эффекта "пулеметной очереди", не перегружая при этом проект лишними файлами.

**ПЛАН РЕАЛИЗАЦИИ:**

*   **1. Модификация `src/lib/drum-machine.ts`:**
    *   **`DRUM_SAMPLES`**: Переработать эту константу. Вместо простой строки с URL, каждый инструмент будет описываться объектом: `{'instrument': { soft: '...', medium: '...', hard: '...' }}`.
    *   **`schedule`**: Изменить логику этого метода. Он должен будет анализировать `velocity` каждого барабанного события и на его основе выбирать, какой из трех сэмплов (`soft`, `medium` или `hard`) воспроизвести.

*   **2. Подготовка Сэмплов:**
    *   Провести ревизию доступной библиотеки сэмплов и отобрать файлы в соответствии со стратегией "3+1" для основных ударных.

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**
Качество и реализм ударных партий значительно возрастут. Ритм-секция станет "дышать" и будет более динамичной, так как `velocity` нот будет влиять не только на громкость, но и на тембр звука.

---

## Стратегический План Развития (v2.0)

**Концепция:** Переход от "музыкального инструмента" к "музыкальному путешествию" и "творческой экосистеме".

### Этап 1: "Стабилизация и Полировка"

**Статус:** Следующий приоритет.

**Задача:** Довести существующие 27 блюпринтов (9 настроений × 3 жанра: `ambient`, `slow trance`, `blues`) до уровня "произведения искусства".
- **Действия:** Прослушать каждый стиль, выявить слабые места (например, несбалансированный ритм, утомляющие элементы) и точечно их исправить через корректировку блюпринтов.
- **Цель:** Получить 27 уникальных, высококачественных "музыкальных миров" как надежную основу для дальнейшего развития.

---

### Этап 2: "Архитектор Путешествий"

**Статус:** Запланировано (после Этапа 1).

**Задача:** Создать `JourneyNavigator` — высокоуровневый модуль для управления драматургией музыкальных сессий.
- **Ключевые возможности:**
    1.  **Принятие "маршрута":** Система должна уметь принимать на вход последовательность стилей, например: `[{ genre: 'ambient', mood: 'dark' }, { genre: 'blues', mood: 'melancholic' }]`.
    2.  **Плавное переключение:** `JourneyNavigator` будет управлять `FractalMusicEngine`, своевременно меняя активные блюпринты.
    3.  **Генерация "мостов":** Создание уникальных, музыкально осмысленных переходов между жанрами и настроениями. Например, при переходе от эмбиента к блюзу, на протяжении 4-8 тактов постепенно вводить блюзовый ритм, сохраняя эмбиент-пэды.
- **Цель:** Предоставить пользователю возможность слушать не отдельные треки, а целые **развивающиеся музыкальные истории**.

---

### Этап 3: "Открытие Мира"

**Статус:** Долгосрочная перспектива (после Этапа 2).

**Задача:** Расширение контента и предоставление инструментов для творчества пользователям.
- **Действия:**
    1.  **Добавление новых жанров:** Создание блюпринтов для `progressive`, `rock`, `house` и других стилей, с самого начала проектируя их для интеграции в "путешествия".
    2.  **Создание редактора блюпринтов:** Разработка UI, который позволит пользователям самим создавать и настраивать музыкальные стили, делиться ими.
- **Цель:** Превратить AuraGroove в открытую творческую платформу.

---

## Блюзовые Мелодии: План Эволюции (Blues Melody Evolution)

**ID:** `FEAT-BLUES-MELODY-001`
**Статус:** В процессе.

### 1. Библиотека "Коронных Фраз" (Lick Library)

**Статус:** **Выполнено** (реализовано для баса в Плане 567).
**Концепция:** Вместо одного риффа, мы создадим небольшую библиотеку из 5-7 классических блюзовых "фраз-клише" (licks) — коротких, узнаваемых мотивов. Это могут быть, например, быстрый пассаж, медленный "тягучий" bend (подтяжка), или ответная фраза в нижнем регистре.
**Реализация:** Движок будет случайным образом выбирать одну из этих фраз и "вставлять" ее в подходящий момент, адаптируя под текущий аккорд.

### 2. Эмоциональная Динамика через "Зов и Ответ" (Call and Response)

**Статус:** Запланировано.
**Концепция:** Это основа блюза. Одна музыкальная фраза ("зов") задает вопрос, а другая ("ответ") ей отвечает. Это создает ощущение диалога и осмысленности.
**Реализация:** Мы можем научить `createMelodyMotif` генерировать парные фразы. Например, первая фраза заканчивается на высокой, "вопросительной" ноте, а следующая за ней — на низкой, "утвердительной" тонике.

### 3. Имитация "Человеческой" Техники Игры

**Статус:** Запланировано.
**Концепция:** Настоящий блюз — это не только ноты, но и артикуляция: слайды, вибрато, "грязные" ноты.
**Реализация:** Мы можем добавить в наши `FractalEvent` специальные параметры (`technique`), которые будут сообщать синтезатору, как именно играть ноту. Например, событие `{ ..., technique: 'slide' }` заставит синтезатор плавно "подъехать" к ноте, а не просто взять ее.

---

## Архивные Идеи (v1.0)

### 1. Иерархическая Гармоническая Модель Мелодии (The Grand Theory)

**ID:** `FEAT-MELODY-001`
**Статус:** Принято, отложено.

**Концепция:**
Мелодия является вершиной иерархии: `Ghost Harmony (Скелет) -> Бас (Фундамент) -> Аккомпанемент (Плоть) -> Мелодия (Сознание)`. Движок адаптирует "вечные" мелодические фразы (описанные интервалами) к текущему аккорду из `GhostHarmony`.

**Причина отсрочки:**
Текущая модель, где мелодия является производной от аккомпанемента, достаточна для эмбиент-стилей. "Большая Теория" будет востребована при реализации более структурированных жанров.

### 2. Расписание Входа Инструментов (Instrument Entry Schedule)

**ID:** `FEAT-SCHED-001`
**Статус:** Принято, отложено.

**Концепция:**
Добавить в `BlueprintPart` поля `instrumentEntry` и `instrumentExit`, позволяющие гибко управлять входом и выходом инструментов в процентах от длины части, а не только через `layers`.

**Причина отсрочки:**
Текущего механизма `layers` достаточно для грубой аранжировки. Это улучшение относится к этапу "тонкой полировки".

### 3. Начальный Мутагенез ("Прививка Хаоса")

**ID:** `FEAT-VAR-001`
**Статус:** Принято, отложено.

**Концепция:**
Принудительно "мутировать" одну из ключевых музыкальных линий (например, басовую) при инициализации движка для усиления вариативности между сессиями с одним и тем же настроением.

**Причина отсрочки:**
Текущей рандомизации достаточно для базовой уникальности. Это улучшение для этапа "тонкой настройки".
