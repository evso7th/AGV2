# Паспорт Композитора (v1.0)

Этот документ — ваше руководство по управлению "сердцем" музыкального движка AuraGroove. Он объясняет, как создается уникальный "генетический код" каждой пьесы и как вы можете на него влиять.

## 1. Концепция: "ДНК Сюиты" (`SuiteDNA`)

Каждый раз, когда вы нажимаете "Regenerate" или запускаете новую сюиту, движок не просто выбирает случайный рифф. Он проводит "акт творения": генерирует уникальный объект `SuiteDNA`. Этот объект — это неизменный "геном" для всей последующей пьесы (на 120-144 такта).

**Из чего состоит `SuiteDNA`:**

1.  **`harmonyTrack: GhostChord[]` (Гармоническая Карта):**
    *   **Что это:** Уникальная, неповторяющаяся последовательность аккордов на всю сюиту.
    *   **Как генерируется:** С помощью **цепи Маркова** (матрицы вероятностей). Движок "проходит" по карте, решая, какой аккорд будет следующим, на основе вероятностей, а не жесткого шаблона.
    *   **Где управлять:** Функция `generateSuiteDNA` в файле `src/lib/music-theory.ts`. Вы можете изменить веса в `progressionMap`, чтобы сделать гармонию более предсказуемой или, наоборот, авангардной.

2.  **`baseTempo: number` (Якорный Темп):**
    *   **Что это:** Основной темп (BPM) для всей пьесы.
    *   **Как генерируется:** Случайно выбирается из "пула" темпов, разрешенных для текущего настроения (`mood`).
    *   **Где управлять:** В той же функции, в объекте `possibleTempos`. Вы можете добавить новые темпы или изменить существующие диапазоны.

3.  **`rhythmicFeel: 'shuffle' | 'straight'` (Ритмический Пульс):**
    *   **Что это:** Глобальное ощущение ритма — будет ли это "качающий" блюзовый шаффл или прямой, "роковый" бит.
    *   **Как генерируется:** Выбирается случайно с вероятностью (сейчас 70% за шаффл).
    *   **Где управлять:** В `generateSuiteDNA`. Вы можете изменить эту вероятность.

4.  **`bassStyle: 'boogie' | 'walking' | 'pedal'` (Стиль Баса):**
    *   **Что это:** Основная манера игры басиста.
    *   **Как генерируется:** Случайно выбирается из пула `bassStyles`.
    *   **Где управлять:** Вы можете добавить в этот пул новые стили (например, `'latin'` или `'funk'`), а затем научить `generateBluesBassRiff` генерировать соответствующие паттерны.

5.  **`drumStyle: 'heavy_backbeat' | 'light_brushes' | 'shuffle_A'` (Стиль Ударных):**
    *   **Что это:** Основной паттерн барабанщика.
    *   **Как генерируется:** Случайно выбирается из пула `drumStyles`.
    *   **Где управлять:** Аналогично басу, вы можете расширить этот пул и научить `createDrumAxiom` генерировать новые биты.

## 2. Как это работает: Единый Источник Правды

1.  **Рождение:** `FractalMusicEngine` при инициализации вызывает `generateSuiteDNA` и получает свой уникальный "геном".
2.  **Память:** Он хранит этот `SuiteDNA` на протяжении всей пьесы.
3.  **Команды:** На каждом такте, вызывая функции генерации партий (`generateBluesBassRiff`, `createDrumAxiom`), он передает им не только текущий аккорд, но и **команду из ДНК**: "Играем буги!" или "Мне нужен легкий шаффл щетками".

Это делает систему гибкой и предсказуемой. Чтобы изменить характер музыки, вам больше не нужно "копаться" в сложной логике движка. Достаточно зайти в "Лабораторию" (`music-theory.ts`) и изменить правила "зачатия" музыки.
