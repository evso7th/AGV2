# Проектный Бэклог "AuraGroove"

Этот документ содержит принятые, но отложенные на будущее идеи и архитектурные решения. Мы возвращаемся к этому списку, когда основная функциональность стабильна и мы готовы к "тонкой настройке".

---

## 1. Расписание Входа Инструментов (Instrument Entry Schedule)

**ID:** `FEAT-SCHED-001`  
**Статус:** Принято, отложено.  
**Дата:** 25.07.2024

### Концепция:
Вместо того, чтобы жестко определять состав инструментов через отдельные "части" блюпринта (например, `INTRO-1`, `INTRO-2`), мы можем добавить в `BlueprintPart` новое, более гибкое поле `instrumentEntry`.

**Пример реализации в `types/music.ts`:**
```typescript
export interface BlueprintPart {
  // ... существующие поля
  instrumentEntry?: {
    [key in InstrumentPart]?: number; // Процент от начала части (0.0 до 1.0)
  };
   instrumentExit?: {
    [key in InstrumentPart]?: number; // Процент от начала части, когда инструмент должен начать затухать
  };
}
```

**Пример использования в `blueprints.ts`:**
```typescript
{
  id: 'INTRO',
  duration: { percent: 20 },
  layers: { 
    pad: true, 
    bass: true, 
    drums: true 
  }, // Все слои разрешены
  instrumentEntry: {
    pad: 0.0,    // Пад вступает сразу
    bass: 0.25,  // Бас вступает на 25% длительности интро
    drums: 0.75, // Ударные вступают на 75%
  }
}
```

### Преимущества:
- **Гибкость:** Позволяет легко настраивать "драматургию" вступления, просто меняя цифры.
- **Чистота Блюпринта:** Убирает необходимость в создании множества мелких, технических "частей" и делает структуру более читаемой.

### Причина отсрочки:
На текущем этапе разработки (грубая настройка) достаточно существующего механизма `layers`. Это решение является усложнением, которое целесообразно внедрять на этапе "тонкой полировки" аранжировок.

---

## 2. Начальный Мутагенез ("Прививка Хаоса")

**ID:** `FEAT-VAR-001`  
**Статус:** Принято, отложено.  
**Дата:** 30.07.2024

### Концепция:
Чтобы усилить слышимое разнообразие между сессиями, не меняя при этом выбранное пользователем настроение, можно принудительно "мутировать" одну из ключевых музыкальных линий (например, басовую) в самом начале, при инициализации движка.

**Пример реализации в `fractal-music-engine.ts`:**
В методе `initialize()`, после генерации библиотеки басовых фраз (`bassPhraseLibrary`):
1.  Выбрать случайную фразу из библиотеки, используя `this.random` (который зависит от `seed`).
2.  Применить к этой фразе функцию `mutateBassPhrase` 2-3 раза подряд.
3.  Установить получившуюся "сильно мутировавшую" фразу как `this.currentBassPhrase`.

### Преимущества:
- **Заметное Разнообразие:** Эффект от уникального `seed` становится слышимым с самого первого такта, так как меняется одна из основ композиции.
- **Сохранение Контроля:** Не затрагивает выбор `mood` или `genre` пользователем.
- **Простота:** Не требует изменения основной архитектуры, только добавляет несколько строк в инициализацию.

### Причина отсрочки:
Текущей рандомизации при инициализации достаточно для базовой уникальности. Это улучшение относится к "тонкой настройке" и может быть внедрено позже для дальнейшего повышения вариативности.
