# Проектный Бэклог "AuraGroove"

Этот документ содержит принятые, но отложенные на будущее идеи и архитектурные решения. Мы возвращаемся к этому списку, когда основная функциональность стабильна и мы готовы к "тонкой настройке".

---

## 1. Иерархическая Гармоническая Модель Мелодии (The Grand Theory)

**ID:** `FEAT-MELODY-001`  
**Статус:** Принято, отложено.  
**Дата:** 27.08.2024

### Концепция:
Это фундаментальная теория, описывающая музыкальную структуру как многоуровневую иерархию, где каждый следующий слой строится на предыдущем, а мелодия является вершиной этой эволюции.

**Иерархия:**
1.  **Ghost Harmony (Скелет):** Неслышимая, заранее сгенерированная последовательность аккордов на всю сюиту. Это "закон", определяющий гармоническое развитие.
2.  **Бас (Фундамент):** Опорная партия, которая следует "скелету" и является фундаментом для всей слышимой гармонии. Басовые риффы и фразы должны быть осмысленными и могут быть основаны на проверенных паттернах из реального мира.
3.  **Аккомпанемент (Плоть):** Гармонический слой, который строится непосредственно на нотах, заданных басом и `GhostHarmony`. Он "наращивает мясо" на скелет.
4.  **Мелодия (Сознание/Вишенка на торте):** Вершина иерархии. Мелодия не является случайной или изолированной. Она должна быть осмысленно "упакована" в общую гармонию.

**Принцип генерации мелодии (по этой теории):**
*   **Не изобретать, а адаптировать:** Вместо генерации "из ничего", система должна использовать библиотеку "вечных", красивых мелодических фраз (аксиом), заимствованных из лучших образцов мировой музыки.
*   **Гармоническая Адаптация:** Эти аксиомы описываются не абсолютными нотами, а **интервалами** относительно тоники. При генерации, движок "накладывает" эту интервальную структуру на **текущий аккорд** из `GhostHarmony`, создавая мелодию, которая одновременно и узнаваема (по своей форме) и идеально вписывается в текущий гармонический контекст.

### Причина отсрочки:
Эта модель является стратегической целью, но ее реализация требует значительных изменений. Для текущей задачи (создание качественного **эмбиента**) была выбрана более простая и стилистически подходящая модель, где мелодия является производной от верхних нот аккомпанемента. Мы вернемся к этой "Большой Теории", когда будем готовы реализовывать более сложные и структурированные музыкальные жанры (например, `progressive`, `trance`).

---

## 2. Расписание Входа Инструментов (Instrument Entry Schedule)

**ID:** `FEAT-SCHED-001`  
**Статус:** Принято, отложено.  
**Дата:** 25.07.2024

### Концепция:
Вместо того, чтобы жестко определять состав инструментов через отдельные "части" блюпринта (например, `INTRO-1`, `INTRO-2`), мы можем добавить в `BlueprintPart` новое, более гибкое поле `instrumentEntry`.

**Пример реализации в `types/music.ts`:**
```typescript
export interface BlueprintPart {
  // ... существующие поля
  instrumentEntry?: {
    [key in InstrumentPart]?: number; // Процент от начала части (0.0 до 1.0)
  };
   instrumentExit?: {
    [key in InstrumentPart]?: number; // Процент от начала части, когда инструмент должен начать затухать
  };
}
```

### Причина отсрочки:
На текущем этапе разработки (грубая настройка) достаточно существующего механизма `layers`. Это решение является усложнением, которое целесообразно внедрять на этапе "тонкой полировки" аранжировок.

---

## 3. Начальный Мутагенез ("Прививка Хаоса")

**ID:** `FEAT-VAR-001`  
**Статус:** Принято, отложено.  
**Дата:** 30.07.2024

### Концепция:
Чтобы усилить слышимое разнообразие между сессиями, не меняя при этом выбранное пользователем настроение, можно принудительно "мутировать" одну из ключевых музыкальных линий (например, басовую) в самом начале, при инициализации движка.

### Причина отсрочки:
Текущей рандомизации при инициализации достаточно для базовой уникальности. Это улучшение относится к "тонкой настройке" и может быть внедрено позже для дальнейшего повышения вариативности.
