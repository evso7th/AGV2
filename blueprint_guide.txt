
# AuraGroove: Руководство по параметрам Блюпринта (v1.0)

Блюпринт — это "Конституция" музыкального мира. Он определяет границы, внутри которых импровизирует FractalMusicEngine (СОР).

## 1. Глобальные параметры (musical)
- `key`: Тональность. `root` (MIDI нота), `scale` (лад: dorian, phrygian и т.д.), `octave` (базовая октава).
- `bpm`: Темп. `base` (основной), `range` (коридор отклонений), `modifier` (эмоциональный множитель).
- `tensionProfile`: Драматическая дуга. Типы: `arc` (дуга), `plateau` (плато), `wave` (волна). Управляет энергией композиции.

## 2. Сценарная оркестровка (stagedInstrumentation)
Это самый мощный инструмент управления драматургией. Секция делится на "сцены" (stages).
- `duration.percent`: Длительность сцены в % от общей длины секции.
- `instrumentation`: Список инструментов для этой сцены.
  - `activationChance`: Вероятность (0..1) вступления инструмента в каждом такте.
  - `instrumentOptions`: Список возможных тембров (пресетов) с весами.
  - `transient`: Если true, инструмент вспыхивает на один такт и исчезает. Если false (по умолчанию) — он остается до конца сюиты (Persistent).

*Механика Dramatic Gravity*: При активации инструмент вступает плавно. Его `summonProgress` растет от 0.1 до 1.0 в течение первых 3 тактов, влияя на громкость и яркость.

## 3. Правила поведения (instrumentRules)
Описывают, *как* играет каждый музыкант.
- `density`: Плотность нот (min/max).
- `register`: Предпочтительный диапазон (low, mid, high).
- `source`: Источник мелодии.
  - `motif`: Генерация на основе L-системы (осмысленные предложения).
  - `harmony_top_note`: Следование за верхним голосом аккомпанемента.
  - `blues_solo`: Использование когнитивной блюзовой модели.
- `techniques`: Список разрешенных приемов игры (walking, riff, arpeggio и т.д.).
- `soloPlan`: Для блюза — выбор конкретного сценария развития соло.

## 4. Ритмическая секция (drums)
- `kitName`: Выбор ударной установки из `drum-kits.ts`.
- `pattern`: `composer` (генерация СОР) или `ambient_beat` (стабильный пульс).
- `useSnare`, `usePerc`, `useGhostHat`: Флаги активности конкретных элементов.
- `ride.enabled`: Включение тарелки райд (обычно только на пиках напряжения).

## 5. Гармонический скелет (harmonicJourney)
Массив "центров тяжести". Определяет, к каким аккордам будет тяготеть композиция в каждой фазе.
- `center`: Целевой аккорд (например, 'Dm7').
- `satellites`: Разрешенные соседние аккорды.
- `weight`: Вес центральной тональности относительно соседей.

## 6. Мутации и Переходы (mutations / outroFill)
- `mutations`: Правила изменения фраз на границах бандлов (микро) и частей (макро).
- `outroFill`: Тип перехода в следующую секцию (`filter_sweep`, `reverb_burst`, `drum_roll`).

---
Используйте это руководство для создания новых музыкальных миров. Помните: Блюпринт задает правила игры, а СОР наполняет их жизнью.
